<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Transición de Tres Imágenes</title>
  <style>
    body {
      margin: 0;
      font-family: "Prumo", Georgia, serif;
      background: #fff; /* Fondo blanco */
      color: #000; /* Cambié el color del texto a negro para contraste */
      overflow-x: hidden;
    }

    /* Imagen fija que cubre parte de la pantalla */
    .fixed-image {
      position: fixed;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 70%;
      height: auto;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s ease-out;
    }

    .fixed-image.show {
      opacity: 1;
    }

    section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      width: 100%;
    }

    .html-libre-hack-black {
      background-color: #000;
      color: #fff;
      font-size: 1.5rem;
      line-height: 1.4;
      padding: 2rem;
      max-width: 700px;
      border-radius: 4px;
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      z-index: 1;
    }

    .html-libre-hack-black.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Contenedor para scroll de cuadros */
    .image-section {
      position: relative;
      min-height: 400vh; /* suficiente para scrollear varios cuadros */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>

  <!-- Sección normal antes de la primera imagen -->
  <section>
    <div class="html-libre-hack-black">
      <p>Sección normal antes de las imágenes.</p>
    </div>
  </section>

  <!-- Contenedor de imágenes fijas y cuadros -->
  <div class="image-section">
    <img src="grafico1.jpg" alt="Gráfico 1" class="fixed-image" id="img1">
    <img src="grafico2.jpg" alt="Gráfico 2" class="fixed-image" id="img2">
    <img src="grafico3.jpg" alt="Gráfico 3" class="fixed-image" id="img3">

    <!-- Cuadros negros -->
    <section>
      <div class="html-libre-hack-black">
        <p>Cuadro negro 1 sobre imagen 1</p>
      </div>
    </section>

    <section>
      <div class="html-libre-hack-black">
        <p>Cuadro negro 2, transición a imagen 2</p>
      </div>
    </section>

    <section>
      <div class="html-libre-hack-black">
        <p>Cuadro negro 3 sobre imagen 2</p>
      </div>
    </section>

    <section>
      <div class="html-libre-hack-black">
        <p>Cuadro negro 4, transición a imagen 3</p>
      </div>
    </section>

    <section>
      <div class="html-libre-hack-black">
        <p>Cuadro negro 5 sobre imagen 3</p>
      </div>
    </section>
  </div>

  <!-- Sección normal después de las imágenes -->
  <section>
    <div class="html-libre-hack-black">
      <p>Sección normal después de las imágenes.</p>
    </div>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Animación cuadros negros
      const boxes = document.querySelectorAll(".html-libre-hack-black");
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add("show");
        });
      }, { threshold: 0.3 });
      boxes.forEach(box => observer.observe(box));

      // Control de imágenes fijas
      const img1 = document.getElementById("img1");
      const img2 = document.getElementById("img2");
      const img3 = document.getElementById("img3");
      const imageSection = document.querySelector(".image-section");
      const sectionHeight = imageSection.offsetHeight;

      // Mostrar img1 al inicio
      img1.classList.add("show");

      // Cambiar imagen según scroll
      window.addEventListener("scroll", () => {
        const rect = imageSection.getBoundingClientRect();
        const scrollProgress = window.innerHeight - rect.top;

        if (scrollProgress < sectionHeight / 3) {
          img1.classList.add("show");
          img2.classList.remove("show");
          img3.classList.remove("show");
        } else if (scrollProgress < (sectionHeight * 2) / 3) {
          img1.classList.remove("show");
          img2.classList.add("show");
          img3.classList.remove("show");
        } else {
          img1.classList.remove("show");
          img2.classList.remove("show");
          img3.classList.add("show");
        }
      });
    });
  </script>
</body>
</html>
