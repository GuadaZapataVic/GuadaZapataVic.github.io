<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Transici√≥n de Im√°genes Compacta</title>
  <style>
    body {
      margin: 0;
      font-family: "Prumo", Georgia, serif;
      background: #fff;
      color: #000;
      overflow-x: hidden;
    }

    h1, h2, h3 { text-align: center; }
    h1 { font-size: 3rem; margin: 2rem 0 1rem; }
    h2 { font-size: 2rem; margin: 2rem 0 1rem; }
    h3 { font-size: 1.5rem; margin: 1rem 0 0.5rem; }

    p {
      max-width: 800px;
      margin: 0 auto 1.5rem;
      line-height: 1.6;
      font-size: 1.1rem;
      text-align: center;
    }

    .divider {
      border-top: 2px solid #cccccc;
      margin: 2rem auto;
      width: 65%;
    }

    /* imagen sticky centrada (detr√°s de los cuadros) */
    .fixed-image {
      position: sticky;
      top: 80px;
      display: block;
      margin: 0 auto;
      width: 65%;
      height: auto;
      opacity: 0;
      transition: opacity 0.5s ease-out;
      z-index: 0;
    }
    .fixed-image.show { opacity: 1; }

    /* slide */
    .image-slide {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      margin: 0;
      min-height: 100vh;
    }

    /* el primer slide es m√°s chico para que aparezca antes */
    .image-slide:first-child {
      min-height: 30vh;
    }

    /* cuadrito negro */
    .html-libre-hack-black {
      background-color: #000;
      color: #fff;
      font-size: 1.2rem;
      line-height: 1.4;
      padding: 1.5rem;
      max-width: 600px;
      border-radius: 4px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.45s ease, transform 0.45s ease;
      z-index: 2;
      text-align: center;
    }
    .html-libre-hack-black.show {
      opacity: 1;
      transform: translateY(0);
    }

    .image-section {
      position: relative;
      height: auto;
      padding: 0;
    }

    img.normal-image {
      display: block;
      margin: 2rem auto;
      width: 70%;
      max-width: 800px;
      height: auto;
    }
  </style>
</head>
<body>

  <h1>T√≠tulo Principal</h1>
  <h2>Subt√≠tulo Inicial</h2>
  <p>P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.

    P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.
    P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.

    P√°rrafo introductorio de ejemplo.P√°rrafo introductorio de ejemplo.
  </p>

  <p>termino el parrafo</p>

  <div class="divider"></div>

  <h2>Subt√≠tulo Secci√≥n 1</h2>
  <p>Texto de ejemplo para la secci√≥n 1.</p>
  <img src="grafico5.png" alt="Linea de tiempo 1" class="normal-image">
  <img src="grafico6.jpg" alt="Linea de tiempo 2" class="normal-image">

  <div class="divider"></div>

  <h2>Subt√≠tulo Secci√≥n 2</h2>
  <p>Texto de ejemplo secci√≥n 2.</p>
  <h3>Subt√≠tulo chico</h3>

  <div class="image-section">
    <img src="grafico1.jpg" alt="Gr√°fico 1" class="fixed-image" id="img1">
    <img src="grafico2.jpg" alt="Gr√°fico 2" class="fixed-image" id="img2">
    <img src="grafico3.jpg" alt="Gr√°fico 3" class="fixed-image" id="img3">

    <div class="image-slide" data-index="0">
      <div class="html-libre-hack-black"><p>Cuadro 1 ‚Äî texto relacionado con imagen 1</p></div>
    </div>

    <div class="image-slide" data-index="1">
      <div class="html-libre-hack-black"><p>Cuadro 2 ‚Äî texto relacionado con imagen 2</p></div>
    </div>

    <div class="image-slide" data-index="2">
      <div class="html-libre-hack-black"><p>Cuadro 3 ‚Äî texto relacionado con imagen 3</p></div>
    </div>
  </div>

  <h3>Subt√≠tulo chico</h3>
  <img src="grafico4.jpg" alt="Otra imagen" class="normal-image">

  <div class="divider"></div>

  <h2>Subt√≠tulo Final</h2>
  <p>Texto ejemplo secci√≥n final.</p>

  <h3>Subt√≠tulo chico</h3>
  <img src="ejemplo2.jpg" alt="Imagen ejemplo 3" class="normal-image">
  <p>Parrafo acompa√±ando imagen ejemplo 3.</p>

  <h3>Subt√≠tulo chico</h3>
  <img src="ejemplo3.jpg" alt="Imagen ejemplo 4" class="normal-image">
  <p>Parrafo acompa√±ando imagen ejemplo 4.</p>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const imgs = [
        document.getElementById('img1'),
        document.getElementById('img2'),
        document.getElementById('img3')
      ];
      const slides = Array.from(document.querySelectorAll('.image-slide'));

      const showSlide = (index) => {
        imgs.forEach((img, i) => img.classList.toggle('show', i === index));
        slides.forEach((slide, i) => {
          const box = slide.querySelector('.html-libre-hack-black');
          if (box) box.classList.toggle('show', i === index);
        });
      };

      // Observa el scroll para cambiar im√°genes
      const observer = new IntersectionObserver((entries) => {
        let activeIndex = null;
        for (const entry of entries) {
          if (entry.isIntersecting) {
            activeIndex = slides.indexOf(entry.target);
            break;
          }
        }
        if (activeIndex !== null) {
          showSlide(activeIndex);
        }
      }, {
        threshold: 0.05,
        rootMargin: "-10% 0px -70% 0px"
      });

      slides.forEach(s => observer.observe(s));

      // üîë Mostrar de entrada el primer slide (evita espacio en blanco)
      showSlide(0);

      const checkInitial = () => {
        let activeIndex = slides.findIndex(slide => {
          const rect = slide.getBoundingClientRect();
          return rect.top < window.innerHeight * 0.7 && rect.bottom > window.innerHeight * 0.1;
        });
        if (activeIndex >= 0) showSlide(activeIndex);
      };

      checkInitial();
      window.addEventListener('resize', checkInitial);
    });
  </script>
</body>
</html>
